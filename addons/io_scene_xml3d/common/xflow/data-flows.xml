<xml3d xmlns="http://www.xml3d.org/2009/xml3d">
    <dataflow id="blenderSkinning" out="position, normal">
        <int param="true" name="bone_parent"/>
        <float4 param="true" name="rotation_quaternion"/>
        <float3 param="true" name="position"/>
        <float3 param="true" name="location"/>
        <float3 param="true" name="normal"/>
        <int4 param="true" name="bone_index"/>
        <float4 param="true" name="bone_weight"/>
        <float4x4 param="true" name="inverse_bind_matrix"/>
        <float param="true" name="animKey">0</float>
        <compute>
            rot = xflow.slerpSeq(rotation_quaternion, animKey);
            loc = xflow.lerpSeq(location, animKey);
            pose = xflow.createTransform({translation: loc, rotation: rot});

            pose = xflow.forwardKinematics(bone_parent, pose);
            boneXform = xflow.mul(inverse_bind_matrix, pose);
            normal = xflow.skinDirection(normal, bone_index, bone_weight, boneXform);
            position = xflow.skinPosition(position, bone_index, bone_weight, boneXform);
        </compute>
    </dataflow>
</xml3d>